import{_ as e,E as a,T as t,U as s,D as o,S as l,K as n,o as r,c as i,w as m,i as u,a as d,d as f,f as c,g as p,H as h,an as b}from"./index.1c5e976d.js";import{_}from"./uni-easyinput.2a636516.js";import{_ as y}from"./uni-forms-item.0adb67f4.js";import{_ as g}from"./uni-forms.1f46fdd1.js";import{v as D}from"./uni-cms-categories.9d38cea1.js";const V=a.database();V.command;function j(e){let a={};for(let t in D)e.includes(t)&&(a[t]=D[t]);return a}const k=e({data(){let e={name:"",description:"",icon:"",sort:null,article_count:null};return{formData:e,formOptions:{},rules:{...j(Object.keys(e))}}},onReady(){this.$refs.form.setRules(this.rules)},methods:{submit(){t({mask:!0}),this.$refs.form.validate().then((e=>this.submitForm(e))).catch((()=>{})).finally((()=>{s()}))},submitForm(e){return V.collection("uni-cms-categories").add(e).then((e=>{o({title:"新增成功"});try{this.getOpenerEventChannel().emit("refreshData")}catch(a){}setTimeout((()=>l()),500)})).catch((e=>{n({content:e.message||"请求服务失败",showCancel:!1})}))}}},[["render",function(e,a,t,s,o,l){const n=c(p("uni-easyinput"),_),D=c(p("uni-forms-item"),y),V=h,j=b,k=u,v=c(p("uni-forms"),g);return r(),i(k,{class:"uni-container"},{default:m((()=>[d(v,{ref:"form",model:o.formData,validateTrigger:"bind"},{default:m((()=>[d(D,{name:"name",label:"名称",required:""},{default:m((()=>[d(n,{placeholder:"类别名称",modelValue:o.formData.name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.name=e),trim:"both"},null,8,["modelValue"])])),_:1}),d(D,{name:"description",label:"描述"},{default:m((()=>[d(n,{placeholder:"类别描述",modelValue:o.formData.description,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.description=e),trim:"both"},null,8,["modelValue"])])),_:1}),d(D,{name:"sort",label:"排序"},{default:m((()=>[d(n,{placeholder:"类别显示顺序",type:"number",modelValue:o.formData.sort,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.sort=e)},null,8,["modelValue"])])),_:1}),d(k,{class:"uni-button-group"},{default:m((()=>[d(V,{type:"primary",class:"uni-button",style:{width:"100px"},onClick:l.submit},{default:m((()=>[f("提交")])),_:1},8,["onClick"]),d(j,{"open-type":"navigateBack",style:{"margin-left":"15px"}},{default:m((()=>[d(V,{class:"uni-button",style:{width:"100px"}},{default:m((()=>[f("返回")])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})}]]);export{k as default};
